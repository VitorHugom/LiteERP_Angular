<div class="fechamento-caixa-container">
  <div class="top-bar">
    <button class="voltar-button" (click)="voltarParaHome()" [disabled]="carregandoRelatorio">
      ‚Üê Voltar
    </button>
  </div>

  <div class="content">
    <div class="header">
      <h1 class="title">üìä Fechamento de Caixa</h1>
      <p class="subtitle">Gerar relat√≥rio de movimenta√ß√µes do caixa</p>
    </div>

    <!-- Loading inicial -->
    <div *ngIf="carregando" class="loading">
      <div class="spinner"></div>
      <p>Carregando dados...</p>
    </div>

    <!-- Informa√ß√£o da Conta -->
    <div *ngIf="!carregando && contaCaixa" class="conta-info-card">
      <div class="conta-info-header">
        <span class="conta-icon">üíº</span>
        <div class="conta-details">
          <h3>{{ contaCaixa.descricao }}</h3>
          <p>Respons√°vel: {{ contaCaixa.usuarioResponsavelNome }}</p>
        </div>
      </div>
      <div class="conta-saldo">
        <span class="saldo-label">Saldo Atual:</span>
        <span class="saldo-valor">R$ {{ contaCaixa.saldoAtual.toLocaleString('pt-BR', { minimumFractionDigits: 2 }) }}</span>
      </div>
    </div>

    <!-- Formul√°rio -->
    <form *ngIf="!carregando && contaCaixa" [formGroup]="fechamentoCaixaForm" (ngSubmit)="onSubmit()" class="form">
      <!-- Per√≠odo -->
      <div class="periodo-group">
        <h3>Per√≠odo do Relat√≥rio</h3>
        <div class="periodo-inputs">
          <div class="form-group">
            <label for="dataInicio" class="required">Data de In√≠cio</label>
            <input
              type="date"
              id="dataInicio"
              formControlName="dataInicio"
              [disabled]="carregandoRelatorio"
              required>
          </div>
          <div class="form-group">
            <label for="dataFim" class="required">Data de Fim</label>
            <input
              type="date"
              id="dataFim"
              formControlName="dataFim"
              [disabled]="carregandoRelatorio"
              required>
          </div>
        </div>
      </div>

      <!-- Bot√£o de Gerar Relat√≥rio -->
      <button type="submit" class="btn btn-primary" [disabled]="carregandoRelatorio">
        <span *ngIf="!carregandoRelatorio">üìÑ Gerar Relat√≥rio PDF</span>
        <span *ngIf="carregandoRelatorio">‚è≥ Gerando Relat√≥rio...</span>
      </button>

      <!-- Mensagem de Erro -->
      <div *ngIf="erro" class="alert alert-error">
        <span class="icon">‚ö†Ô∏è</span>
        <span>{{ erro }}</span>
      </div>
    </form>

    <!-- Informa√ß√µes sobre o relat√≥rio -->
    <div *ngIf="!carregando && contaCaixa" class="info-card">
      <h3>‚ÑπÔ∏è Sobre o Relat√≥rio</h3>
      <ul>
        <li>O relat√≥rio ser√° gerado em formato PDF</li>
        <li>Cont√©m todas as movimenta√ß√µes do per√≠odo selecionado</li>
        <li>Inclui saldo inicial, entradas, sa√≠das e saldo final</li>
        <li>Mostra detalhes de cada movimenta√ß√£o (data, descri√ß√£o, valor, etc.)</li>
      </ul>
    </div>
  </div>
</div>

